-- MySQL Script generated by MySQL Workbench
-- Fri Nov 15 14:21:42 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema sys
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `sys` ;

-- -----------------------------------------------------
-- Schema sys
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `sys` DEFAULT CHARACTER SET utf8 ;
USE `sys` ;

-- -----------------------------------------------------
-- Table `sys`.`INSTRUMENT CATEGORY`
-- -----------------------------------------------------gg
DROP TABLE IF EXISTS `sys`.`INSTRUMENT CATEGORY` ;

CREATE TABLE IF NOT EXISTS `sys`.`INSTRUMENT CATEGORY` (
  `IC_ID` SMALLINT NOT NULL,
  `Name` VARCHAR(255) NULL,
  `Description` VARCHAR(255) NULL,
  PRIMARY KEY (`IC_ID`));


-- -----------------------------------------------------
-- Table `sys`.`INSTRUMENT MODEL`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sys`.`INSTRUMENT MODEL` ;

CREATE TABLE IF NOT EXISTS `sys`.`INSTRUMENT MODEL` (
  `IM_ID` INT NOT NULL,
  `Name` VARCHAR(255) NULL,
  `Description` VARCHAR(45) NULL,
  PRIMARY KEY (`IM_ID`));


-- ------------------------------------------------------
-- Table `sys`.`INSTRUMENT TYPES`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sys`.`INSTRUMENT TYPES` ;

CREATE TABLE IF NOT EXISTS `sys`.`INSTRUMENT TYPES` (
  `IT_ID` SMALLINT NOT NULL,
  `Name` VARCHAR(45) NULL,
  `Description` VARCHAR(255) NULL,
  `INSTRUMENT CATEGORY_IC_ID` SMALLINT NOT NULL,
  PRIMARY KEY (`IT_ID`),
  INDEX `fk_INSTRUMENT TYPES_INSTRUMENT CATEGORY1_idx` (`INSTRUMENT CATEGORY_IC_ID` ASC) VISIBLE,
  CONSTRAINT `fk_INSTRUMENT TYPES_INSTRUMENT CATEGORY1`
    FOREIGN KEY (`INSTRUMENT CATEGORY_IC_ID`)
    REFERENCES `sys`.`INSTRUMENT CATEGORY` (`IC_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `sys`.`PATIENT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sys`.`PATIENT` ;

CREATE TABLE IF NOT EXISTS `sys`.`PATIENT` (
  `THC` SMALLINT NOT NULL,
  `Last_Name` VARCHAR(255) NOT NULL,
  `First_Name` VARCHAR(45) NULL,
  PRIMARY KEY (`THC`));


-- -----------------------------------------------------
-- Table `sys`.`VISIT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sys`.`VISIT` ;

CREATE TABLE IF NOT EXISTS `sys`.`VISIT` (
  `Visit_ID` INT NOT NULL,
  `Visit_nr` SMALLINT NULL,
  `Date` DATETIME NULL,
  `Comments` VARCHAR(45) NULL,
  `PATIENT_THC` SMALLINT NOT NULL,
  `FollowUpVisit_Type` VARCHAR(45) NULL,
  PRIMARY KEY (`Visit_ID`, `PATIENT_THC`),
  INDEX `fk_VISIT_PATIENT1_idx` (`PATIENT_THC` ASC) VISIBLE,
  CONSTRAINT `fk_VISIT_PATIENT1`
    FOREIGN KEY (`PATIENT_THC`)
    REFERENCES `mydb`.`PATIENT` (`THC`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `sys`.`INSTRUMENT`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sys`.`INSTRUMENT` ;

CREATE TABLE IF NOT EXISTS `sys`.`INSTRUMENT` (
  `Instr_ID` SMALLINT NOT NULL,
  `Comments` VARCHAR(45) NULL,
  `INSTRUMENT CATEGORY_IC_ID` SMALLINT NOT NULL,
  `INSTRUMENT MODEL_IM_ID` INT NOT NULL,
  `INSTRUMENT TYPES_IT_ID` SMALLINT NOT NULL,
  `VISIT_Visit_ID` INT NOT NULL,
  `VISIT_PATIENT_THC` SMALLINT NOT NULL,
  PRIMARY KEY (`Instr_ID`),
  INDEX `fk_INSTRUMENT_INSTRUMENT CATEGORY1_idx` (`INSTRUMENT CATEGORY_IC_ID` ASC) VISIBLE,
  INDEX `fk_INSTRUMENT_INSTRUMENT MODEL1_idx` (`INSTRUMENT MODEL_IM_ID` ASC) VISIBLE,
  INDEX `fk_INSTRUMENT_INSTRUMENT TYPES1_idx` (`INSTRUMENT TYPES_IT_ID` ASC) VISIBLE,
  INDEX `fk_INSTRUMENT_VISIT1_idx` (`VISIT_Visit_ID` ASC, `VISIT_PATIENT_THC` ASC) VISIBLE,
  CONSTRAINT `fk_INSTRUMENT_INSTRUMENT CATEGORY1`
    FOREIGN KEY (`INSTRUMENT CATEGORY_IC_ID`)
    REFERENCES `sys`.`INSTRUMENT CATEGORY` (`IC_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_INSTRUMENT_INSTRUMENT MODEL1`
    FOREIGN KEY (`INSTRUMENT MODEL_IM_ID`)
    REFERENCES `sys`.`INSTRUMENT MODEL` (`IM_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_INSTRUMENT_INSTRUMENT TYPES1`
    FOREIGN KEY (`INSTRUMENT TYPES_IT_ID`)
    REFERENCES `sys`.`INSTRUMENT TYPES` (`IT_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_INSTRUMENT_VISIT1`
    FOREIGN KEY (`VISIT_Visit_ID` , `VISIT_PATIENT_THC`)
    REFERENCES `sys`.`VISIT` (`Visit_ID` , `PATIENT_THC`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `sys`.`COUNSELING`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sys`.`COUNSELING` ;

CREATE TABLE IF NOT EXISTS `sys`.`COUNSELING` (
  `Counseling_ID` SMALLINT NOT NULL,
  `Type` VARCHAR(1) NULL,
  `Comments` VARCHAR(32) NULL,
  `VISIT_Visit_ID` INT NOT NULL,
  INDEX `fk_COUNSELING_VISIT1_idx` (`VISIT_Visit_ID` ASC) VISIBLE,
  PRIMARY KEY (`Counseling_ID`),
  CONSTRAINT `fk_COUNSELING_VISIT1`
    FOREIGN KEY (`VISIT_Visit_ID`)
    REFERENCES `sys`.`VISIT` (`Visit_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `sys`.`REM`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `sys`.`REM` ;

CREATE TABLE IF NOT EXISTS `sys`.`REM` (
  `REM_ID` SMALLINT NOT NULL,
  `Comments` VARCHAR(32) NULL,
  `Freq_RE` DECIMAL(28) NULL,
  `T_R_SPL` DECIMAL(28) NULL,
  `Mix_R_SPL` DECIMAL(28) NULL,
  `Mix_R_SL` DECIMAL(28) NULL,
  `Tol_R_SPL` DECIMAL(28) NULL,
  `Tol_R_SL` DECIMAL(28) NULL,
  `Max_R_SL` DECIMAL(28) NULL,
  `Max_R_SPL` DECIMAL(28) NULL,
  `Freg_LE` DECIMAL(28) NULL,
  `Th_L_SPL` DECIMAL(28) NULL,
  `Mix_L_SPL` DECIMAL(28) NULL,
  `Mix_L_SL` DECIMAL(28) NULL,
  `Tol_L_SPL` DECIMAL(28) NULL,
  `Tol_L_SL` DECIMAL(28) NULL,
  `Max_L_SL` DECIMAL(28) NULL,
  `Max_L_SPL` DECIMAL(28) NULL,
  `INSTRUMENT_Instr_ID` SMALLINT NOT NULL,
  `VISIT_Visit_ID` INT NOT NULL,
  PRIMARY KEY (`REM_ID`),
  INDEX `fk_REM_INSTRUMENT_idx` (`INSTRUMENT_Instr_ID` ASC) VISIBLE,
  INDEX `fk_REM_VISIT1_idx` (`VISIT_Visit_ID` ASC) VISIBLE,
  CONSTRAINT `fk_REM_INSTRUMENT`
    FOREIGN KEY (`INSTRUMENT_Instr_ID`)
    REFERENCES `sys`.`INSTRUMENT` (`Instr_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_REM_VISIT1`
    FOREIGN KEY (`VISIT_Visit_ID`)
    REFERENCES `sys`.`VISIT` (`Visit_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
